<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="/css/bootstrap.min.css" type="text/css" rel="stylesheet" crossorigin="anonymous">
    <link href="/css/style.css" type="text/css" rel="stylesheet" crossorigin="anonymous">

    <title>OpenRMF Professional System Package Manager</title>
</head>
<body>
    <main class="main" id="top">
        <div id="divMainContainer" class="container-fluid" data-layout="container">
          <div class="content">
            <h1 class="mb-3">OpenRMF<sup>&reg;</sup> Professional Sample Application</h1>
            <div class="card overflow-hidden mb-3">
              <div class="card-header bg-light">
                <div class="row justify-content-between align-items-center">
                  <div class="col-sm-auto">
                    <h5 class="mb-1 mb-md-0">Your System Packages</h5>
                  </div>
                  <div class="col-sm-auto fs--1">
                    
                  </div>
                </div>
              </div>
              <div class="card-body fs--1">
                <form id="frmSystemPackageRecord">
                    <div class="row">
                        <div class="col-6">
                            <div class="form-group">
                              <label for="frmSystemPackageSelection">System Package</label>
                              <select class="form-select mb-3" id="frmSystemPackageSelection" 
                                    onchange="getSystemPackageRecord(); return false;">
                                <option value="">[Choose One]</option>
                              </select>
                            </div>
                        </div>
                    </div>
                </form>
              </div>
            </div> <!-- end system package selection -->

            <div class="card mb-3">
                <div class="card-header">
                  <div class="row align-items-center">
                    <div class="col">
                      <h5 class="mb-0">System Package Information</h5>
                    </div>
                    <div class="col-auto"><a id="btnChecklists" class="btn btn-primary btn-sm" title="View Checklists" onclick="viewChecklists(); return false;"> Checklists</a> <a id="btnCompliance" class="btn btn-primary btn-sm" title="View Compliance" onclick="viewCompliance(); return false;"> Compliance</a> <a id="btnPOAMRisk" class="btn btn-primary btn-sm" title="View POAM Risk Information" onclick="viewPOAMRisk(); return false;"> Risk Profile</a> <a id="btnAddTemplate" class="btn btn-primary btn-sm" title="Add Checklists from Templates" onclick="viewTemplates(); return false;"> Add from Templates</a> </div>
                  </div>
                </div>
                <div class="card-body border-top" id="bodySystemPackageRecord">
                  <div class="row">
                    <div class="col-lg col-xxl-5">
                      <div class="row">
                        <div class="col-5 col-sm-4">
                          <p class="font-weight-semi-bold mb-1">System Key</p>
                        </div>
                        <div class="col"><span id="txtSystemKey"></span></div>
                      </div>
                      <div class="row">
                        <div class="col-5 col-sm-4">
                          <p class="font-weight-semi-bold mb-1">Acronym</p>
                        </div>
                        <div class="col"><span id="txtSystemAcronym"></span></div>
                      </div>
                      <div class="row">
                        <div class="col-5 col-sm-4">
                          <p class="font-weight-semi-bold mb-1">Version Number</p>
                        </div>
                        <div class="col"><span id="txtSystemVersionNumber"></span></div>
                      </div>
                      <div class="row">
                        <div class="col-5 col-sm-4">
                            <p class="font-weight-semi-bold mb-1">System Package Type</p>
                        </div>
                        <div class="col" id="divSystemPackageType"></div>
                      </div>
                      <div id="panelRMFCIALevels" style="display: none;">
                        <div class="row">
                          <div class="col-5 col-sm-4">
                            <p class="font-weight-semi-bold mb-1">Confidentiality</p>
                          </div>
                          <div class="col">
                            <p class="mb-1"><span id="txtConfidentiality"></span></p>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-5 col-sm-4">
                            <p class="font-weight-semi-bold mb-1">Integrity</p>
                          </div>
                          <div class="col">
                            <p class="mb-1"><span id="txtIntegrity"></span></p>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-5 col-sm-4">
                            <p class="font-weight-semi-bold mb-1">Availability</p>
                          </div>
                          <div class="col">
                            <p class="mb-1"><span id="txtAvailability"></span></p>
                          </div>
                        </div>
                      </div>
                      <div id="panelFedRAMPLevel" style="display: none;">
                          <div class="row">
                          <div class="col-5 col-sm-4">
                              <p class="font-weight-semi-bold mb-1">FedRAMP Level</p>
                          </div>
                          <div class="col">
                              <p class="mb-1"><span id="txtFedRAMPLevel"></span></p>
                          </div>
                          </div>
                      </div>
                      <div class="row">
                        <div class="col-5 col-sm-4">
                          <p class="font-weight-semi-bold mb-1"># Checklists</p>
                        </div>
                        <div class="col"><span id="txtNumberOfChecklists"></span></div>
                      </div>
                      <div class="row">
                        <div class="col-5 col-sm-4">
                          <p class="font-weight-semi-bold mb-1">Last Saved Compliance</p>
                        </div>
                        <div class="col">
                          <p class="mb-1"><span id="txtLastComplianceDate"></span></p>
                        </div>
                      </div>
                      <div class="row">
                        <div class="col-5 col-sm-4">
                          <p class="font-weight-semi-bold mb-1">Authorization Type</p>
                        </div>
                        <div class="col">
                          <p class="mb-1"><span id="txtAuthorizationType"></span></p>
                        </div>
                      </div>
                      <div class="row">
                        <div class="col-5 col-sm-4">
                          <p class="font-weight-semi-bold mb-1">Authorization Status</p>
                        </div>
                        <div class="col">
                          <p class="mb-1"><span id="txtAuthorizationStatus"></span></p>
                        </div>
                      </div>
                      <div class="row">
                        <div class="col-5 col-sm-4">
                          <p class="font-weight-semi-bold mb-1">Authorization Date</p>
                        </div>
                        <div class="col">
                          <p class="mb-1"><span id="txtAuthorizationDate"></span></p>
                        </div>
                      </div>
                      <div class="row">
                        <div class="col-5 col-sm-4">
                          <p class="font-weight-semi-bold mb-1">Authorization Info</p>
                        </div>
                        <div class="col">
                          <p class="mb-1"><span id="txtAuthorizationComments"></span></p>
                        </div>
                      </div>
                    </div>
                    <div class="col-lg col-xxl-5 mt-4 mt-lg-0 offset-xxl-1">
                      <div class="row">
                        <div class="col-5 col-sm-4">
                          <p class="font-weight-semi-bold mb-1">Component</p>
                        </div>
                        <div class="col"><span id="txtComponent"></span></div>
                      </div>
                      <div class="row">
                        <div class="col-5 col-sm-4">
                          <p class="font-weight-semi-bold mb-1">IT Registration #</p>
                        </div>
                        <div class="col"><span id="txtRegistrationNumber"></span></div>
                      </div>
                      <div class="row">
                        <div class="col-5 col-sm-4">
                          <p class="font-weight-semi-bold mb-1">System Type</p>
                        </div>
                        <div class="col"><span id="txtSystemType"></span></div>
                      </div>
                      <div class="row">
                        <div class="col-5 col-sm-4">
                          <p class="font-weight-semi-bold mb-1">Created</p>
                        </div>
                        <div class="col"><span id="txtCreatedDate"></span></div>
                      </div>
                      <div class="row">
                        <div class="col-5 col-sm-4">
                          <p class="font-weight-semi-bold mb-1">Created By</p>
                        </div>
                        <div class="col"><span id="txtCreatedBy"></span></div>
                      </div>
                      <div class="row">
                        <div class="col-5 col-sm-4">
                          <p class="font-weight-semi-bold mb-1">Updated</p>
                        </div>
                        <div class="col"><span id="txtUpdatedDate"></span></div>
                      </div>
                      <div class="row">
                        <div class="col-5 col-sm-4">
                          <p class="font-weight-semi-bold mb-1">Updated By</p>
                        </div>
                        <div class="col"><span id="txtUpdatedBy"></span></div>
                      </div>
                      <div class="row">
                        <div class="col-5 col-sm-4">
                          <p class="font-weight-semi-bold mb-1">POC Name</p>
                        </div>
                        <div class="col"><span id="txtPOCName"></span></div>
                      </div>
                      <div class="row">
                        <div class="col-5 col-sm-4">
                          <p class="font-weight-semi-bold mb-1">POC Phone</p>
                        </div>
                        <div class="col"><span id="txtPOCPhone"></span></div>
                      </div>
                      <div class="row">
                        <div class="col-5 col-sm-4">
                          <p class="font-weight-semi-bold mb-1">POC Email</p>
                        </div>
                        <div class="col"><span id="txtPOCEmail"></span></div>
                      </div>
                      <div class="row">
                        <div class="col-5 col-sm-4">
                          <p class="font-weight-semi-bold mb-1">OMB Project Id</p>
                        </div>
                        <div class="col"><span id="txtOMBProjectId"></span></div>
                      </div>
                      <div class="row">
                        <div class="col-5 col-sm-4">
                          <p class="font-weight-semi-bold mb-1">Security Costs</p>
                        </div>
                        <div class="col"><span id="txtSecurityCosts"></span></div>
                      </div>
                    </div>
                  </div>
                </div>
              </div> <!-- end system package record-->

          </div> <!-- end content -->
        </div> <!-- end divMainContainer -->
      </main>
    <script src="/js/bootstrap.min.js"></script>
    <script>

        document.addEventListener("DOMContentLoaded", function(event) { 
            getSystemPackages();
        });

        async function getSystemPackages() {
            let response = await fetch("/api/systempackages/");
            if (response.ok) {
                var data = await response.json();
                for(const item of data){
                    var packages = document.getElementById("frmSystemPackageSelection");
                    packages.add(new Option(item.title,item.systemKey),undefined);
                }
            } else {
                alert("No valid system data found");
            }
        }

        async function getSystemPackageRecord() {
            var systemKey = getFieldValue("frmSystemPackageSelection");
            if (systemKey) {
                let response = await fetch("/api/systempackage/"+systemKey);
                if (response.ok) {
                    var data = await response.json();
                    if (data) {
                        
                    } else {
                        alert('System Package data did not load properly.');
                    }
                } else {
                    alert("No valid system data found");
                }
            } else {
                alert('Please choose a valid System Package');
            }
        }

        function setFieldValue(id, value) {
            var element = document.getElementById(id);
            if (element) {
                element.innerHTML = value;
            }
        }

        function getFieldValue(id) {
            var element = document.getElementById(id);
            if (element) {
                return element.value;
            } else {
                return "";
            }
        }

    </script>
</body>
</html>